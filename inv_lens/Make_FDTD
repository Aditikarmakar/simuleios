BIN = fdtd
CXX = g++
CXXFLAGS = -std=c++11 -g -Wall -march=native -fno-omit-frame-pointer

plot: clean_dat $(BIN)
	./$(BIN) > /dev/null
	gnuplot plotFDTD.gp -

build: $(BIN)

run: clean_dat $(BIN)
	perf record -g 'graph,0.5,caller' ./$(BIN) 

$(BIN): FDTD.cpp
	$(CXX) $(CXXFLAGS) FDTD.cpp -o $(BIN) 

clean_dat:
	rm -Rf FDTD.dat

clean: clean_dat
	rm -Rf $(BIN)
